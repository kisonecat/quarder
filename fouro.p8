pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
-- in2the4
-- by kisonecat

beats_per_second = 2
last_beat = 0

labels = {}
cards = {}

function _init()
   for i=1, 10 do
      labels[i] = 48 + i - 1
   end

   shuffle()

   px = 1
   py = cards[px]
end

function shuffle()
   for i=1, 10 do
      cards[i] = i
   end

   for i=10, 2, -1 do
      local j = flr(rnd(i))+1
      local s = cards[j]
      cards[j] = cards[i]
      cards[i] = s
   end
end
    
function _update()
   local move_x = false
   local move_y = false   
   
   if (btnp(1)) then
      px = px + 1
      move_x = true
   end
    
   if (btnp(0)) then
      px = px - 1
      move_x = true
   end

   if move_x then
      if (px < 1) px = 1
      if (px > 10) px = 10
      py = cards[px]
   end

   if (btnp(2)) then
      py = py + 1
      move_y = true
   end
    
   if (btnp(3)) then
      py = py - 1
      move_y = true
   end

   if move_y then
      if (py < 1) py = 1
      if (py > 10) py = 10
      for i=1,10 do
	 if cards[i] == py then
	    px = i
	 end
      end
   end
   
   local t = time()

   if flr(t * beats_per_second) > flr(last_beat * beats_per_second) then
      last_beat = t
      sfx(1)
   end
end

margin = (128 - 80) / 2

function board_x(x)
   return (x-1)*8 + margin
end

function board_y(y)
   return 128 - 8 - ((y-1)*8 + margin)
end

function _draw()
   cls()
   
   for i=1, 10 do
      local c = cards[i]
      spr( labels[c], board_x(i), board_y(c) )
   end

   if (time() - last_beat < 0.1) then
      spr( 2, board_x(px) - 4, board_y(py) - 4, 2, 2 )
   else
      spr( 0, board_x(px) - 4, board_y(py) - 4, 2, 2 )
   end
end

__gfx__
02000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00820000000028000022200000022200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00288820028882000028802002088200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00080000000080000028888008888200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00080000000080000000800000080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00020000000020000002800000082000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00020000000020000002800000082000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00080000000080000000800000080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00080000000080000028888008888200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00288820028882000028802002088200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00820000000028000022200000022200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00777700000770000077700000777700007007000077770000777000007777000077770000777700000000000000000000000000000000000000000000000000
00700700000070000000070000000700007007000070000000700000007007000070070000700700000000000000000000000000000000000000000000000000
00700700000070000077770000077700007777000077770000777700000007000077770000777700000000000000000000000000000000000000000000000000
00700700000070000070000000000700000007000000070000700700000007000070070000000700000000000000000000000000000000000000000000000000
00777700000070000077770000777700000007000077770000777700000007000077770000000700000000000000000000000000000000000000000000000000
__sfx__
000100003054024530000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000100000037000230003700023000670026500463000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000c55000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000001055000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000001355000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__music__
00 02030444
00 40424344

